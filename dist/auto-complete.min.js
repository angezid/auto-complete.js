/*!*******************************************
* auto-complete.js 1.0.0
* https://github.com/angezid/auto-complete.js
* MIT licensed
* Copyright (c) 2025, angezid
*********************************************/
!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):(t="undefined"!=typeof globalThis?globalThis:t||self).autoComplete=e()}(this,(function(){"use strict";function t(){return t=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},t.apply(null,arguments)}var e={create:function(t,e){var n=this.preprocess(t.queryChars),r="([".concat(n,"]+)"),o="(^|["+this.preprocess(t.triggerChars)+"]+)";return t.debug&&console.log(e+": RegExp trigger pattern - "+o," query pattern - "+r),new RegExp("".concat(o).concat(r,"$"),"u")},preprocess:function(t){var e=this;return t&&t.length?t.split(/(\\[pPu]\{[^}]+\}|\\[swdSWDnt]|.)/).filter((function(t){return t.length})).map((function(t,n){return e.noEscape(t,n)?t:e.escapeCharSet(t)})).join(""):""},noEscape:function(t,e){return 0===e&&"^"===t||t.length>4||/\\[swdSWDnt]/.test(t)},escapeCharSet:function(t){return t.replace(/[-^\]\\]/g,"\\$&")}},n={caretCoordinates:null,getText:function(t,e){var n=this.getSelection(t),r=n.getRangeAt(0),o=r.startContainer,i=r.startOffset,s="";if("true"!==t.contentEditable||e){var a=document.createRange();if(a.selectNodeContents(t),a.setEnd(o,i),s=a.toString(),e)return s}else n.setBaseAndExtent(t,0,o,i),s=n.toString(),n.collapse(o,i);var c=r.getBoundingClientRect();return 0===c.x&&0===c.y&&(c=o.getBoundingClientRect()),this.caretCoordinates=c,s},replace:function(t,e,n){var r=this.getText(t,!0).length;this.select(t,r-e.length,r),document.execCommand("insertText",!1,n)},select:function(t,e,n){for(var r,o,i,s=0,a=0,c=0,u=document.createNodeIterator(t,NodeFilter.SHOW_TEXT);i=u.nextNode();){var l=c+i.nodeValue.length;if(!r&&l>e&&(r=i,s=e-c),!o&&l>=n){o=i,a=n-c;break}c=l}r&&o&&this.getSelection(t).setBaseAndExtent(r,s,o,a)},getSelection:function(t){return t.getRootNode().getSelection()}};function r(t,e,n,r){var o=document.createElement(e);if(n)for(var i in n)o.setAttribute(i,n[i]);return r&&(o.textContent=r),t.appendChild(o),o}var o={caretCoordinates:null,getText:function(t){var e=t.selectionStart,n=t.value.substr(0,e);return this.caretCoordinates=this.getCaretCoordinates(t,e),n},replace:function(t,e,n){var r=t.value,o=t.selectionStart,i=o-e.length;t.value=r.substr(0,i)+n+r.substr(o),t.selectionStart=t.selectionEnd=i+n.length},getCaretCoordinates:function(e,n){var o=e.getBoundingClientRect(),i=e instanceof HTMLInputElement,s=e.value,a=s.substring(0,n),c=window.getComputedStyle(e),u=r(document.body,"div",null,i?a.replace(/\s/g," "):a),l=r(u,"span",null,s.substring(n)||".");["direction","boxSizing","textAlign","textAlignLast","textTransform","textIndent","letterSpacing","wordSpacing","wordBreak","overflowX","overflowY","tabSize"].forEach((function(t){u.style[t]=c[t]}));var f={width:c.width,height:c.height,wordWrap:"normal",whiteSpace:"pre-wrap"};t(u.style,{position:"absolute",visibility:"hidden",top:o.top+"px",left:o.left+"px",font:c.font,padding:c.padding,border:c.border},i?{}:f);var d=parseInt(c.fontSize),g=d+d/2,h=o.top+l.offsetTop-(e.scrollHeight>e.clientHeight?e.scrollTop:0)+parseInt(c.borderTopWidth),p=o.left+l.offsetLeft-(e.scrollWidth>e.clientWidth?e.scrollLeft:0)+parseInt(c.borderLeftWidth)-1;return document.body.removeChild(u),{top:h,left:p,height:g}}},i={chars:["aàáảãạăằắẳẵặâầấẩẫậäåāą","cçćč","dđď","eèéẻẽẹêềếểễệëěēę","iìíỉĩịîïī","lł","nñňń","oòóỏõọôồốổỗộơởỡớờợöøōő","rř","sšśșş","tťțţ","uùúủũụưừứửữựûüůūű","yýỳỷỹỵÿ","zžżź"],obj:{},init:function(){var t=this;this.chars.forEach((function(e){for(var n=e[0],r=e[0].toUpperCase(),o=1;o<e.length;o++)t.obj[e[o]]=n,t.obj[e[o].toUpperCase()]=r}))},replace:function(t){for(var e=this,n=0;n<t.length;n++)if(this.obj[t[n]])return t.split("").map((function(t){return e.obj[t]||t})).join("");return t}};return function(s,a){this.newElement=function(t){M(),E(t)},this.destroy=function(){M(),D(document,"click",q),D(window,"resize",j),D(window,"load",I),f&&document.body.removeChild(f)},this.createIndexes=function(t){return k(t)};var c,u,l,f,d,g,h,p,v,y,m="auto-complete",x="auto-complete.js",b=0,w=0,C=t({},{queryChars:"\\d\\p{L}_-",triggerChars:"\\s!\"#$%&'()*+,-./:;<=>?@[]\\^`{|}~",listTag:"ul",listItemTag:"li",listClass:m+"-list",listItemClass:m+"-item",listOffsetX:5,listOffsetY:5,debounce:1,threshold:1,maxResults:100,debug:!1},a),T=(p=function(){l=null;var t=function(){var t=g?n:o,e=t.getText(c);l=t.caretCoordinates;var r=u.exec(e);if(r){var i,s,a=r.groups;return a&&(s=a.query)?i=a.trigger:(s=r[2])&&(i=r[1]),B("trigger = '".concat(i,"' query = '").concat(s,"'")),{trigger:i,query:s}}var f=e.length;return B("No match. ",(f>20?" ... "+e.slice(f-20):e).replace(/\r?\n|\r/g," ")),null}();if(t&&t.query.length>=C.threshold&&l){var e=function(t){var e=[],n=H(t.query),r=C.startsWith,o=C.suggestions,i=0;function s(t,e){var r=t.indexes,o=function(t,e){for(var n=Math.min(C.threshold+1,t.length);n>=1;n--){var r=e[R(t,n)];if(r)return r}return null}(n,r);o?o.forEach((function(n,r){a(t.array,n[0],n[1],e,r)})):B("Array of indexes is undefined for ",t.query)}function a(o,s,a,c,u){for(;s<a;s++){var l=o[s],f=H(l).indexOf(n);if(r?0===f:f>=0){if(++i>=C.maxResults)break;e.push({text:l,query:t.query,trigger:t.trigger,startIndex:f,arrayIndex:c,sortIndex:u})}}}return Array.isArray(o)?W(o)?a(o,0,o.length,0,0):W(o[0])?o.forEach((function(t,e){a(t,0,t.length,e,0)})):o.forEach((function(t,e){s(t,e)})):s(o,0),B("Suggestion count =",e.length),e}(t);if(N(C.filter)&&e.length&&(e=C.filter(e)||e),b=e.length)return!C.startsWith&&C.sort&&function(t,e){e=H(e,!0),t.sort((function(t,e){return t.startIndex-e.startIndex}));var n=t.findIndex((function(t){return 0===t.startIndex&&e===H(t.value,!0)}));if(n>0){var r=t[0];t[0]=t[n],t[n]=r}}(e,t.query),void function(t){var e=N(C.listItem);f.innerHTML="",t.forEach((function(t){var n=t.text,o=r(f,C.listItemTag,{class:C.listItemClass},n);if(C.highlight){var i=t.startIndex,s=i+t.query.length;o.textContent=i>0?n.substr(0,i):"",r(o,"mark",null,n.substring(i,s)),s<n.length&&o.appendChild(document.createTextNode(n.substr(s)))}e&&C.listItem(o,t);var a=JSON.stringify(t).replace(/"/g,"&#34;");o.setAttribute("data-json",a)}));var n=function(){f.style.display="block";var t=f.getBoundingClientRect(),e=C.listOffsetX,n=C.listOffsetY,r=window.pageYOffset,o=window.pageXOffset,i=o+window.innerWidth-20,s=r+window.innerHeight-20,a=l.top+l.height+r,c=l.left+o;return a+t.height>s?a=a-t.height-l.height-n:a+=n,c+t.width>i?c=c-t.width-e:c+=e,{top:a,left:c}}();f.style.top=n.top+"px",f.style.left=n.left+"px",f.scrollTop=0,w=-1,N(C.show)&&C.show(f)}(e)}j()},v=C.debounce,function(){clearTimeout(y),y=setTimeout((function(){p()}),v)});function E(t){var e="string"==typeof t?document.querySelector(t):t;e&&(g=!(e instanceof HTMLInputElement||e instanceof HTMLTextAreaElement),z(e,"input",A),z(e,"blur",j),z(e,"keydown",L),c=e)}function S(t){!function(t){var e,r;if(h=!0,!t||!(e=t.getAttribute("data-json")))return;var i=JSON.parse(e.replace(/&#34;/g,'"'));r=i.text,N(C.select)&&(r=C.select(i));if(!r)return void j();g?n.replace(c,i.query,r):o.replace(c,i.query,r);var s=C.event;s&&(s instanceof KeyboardEvent||s instanceof InputEvent)&&c.dispatchEvent(s);j()}(t.target.closest(C.listItemTag))}function I(){setTimeout((function(){document.querySelectorAll(d).forEach((function(t){t.style.display="none"}))}),20)}function q(t){f.contains(t.target)||j()}function A(t){!h&&/^(?:insertText|deleteContent($|B))/.test(t.inputType)?T():(h=!1,j())}function j(){f.innerHTML="",f.style.display="none"}function L(t){var e=t.key;if("ArrowUp"===e)return t.preventDefault(),w=w<=0?b-1:w-1,void O();if("ArrowDown"===e)return t.preventDefault(),w=w>=b-1?0:w+1,void O();if("Enter"===e||"Tab"===e){var n=f.querySelector(".selected");if(n)return t.preventDefault(),void n.click()}j()}function O(){var t=document.querySelectorAll("".concat(d," > ").concat(C.listItemTag));t.forEach((function(t,e){t.classList.toggle("selected",e===w)}));var e=t[w];e&&e.scrollIntoView({block:"nearest",behavior:"smooth"})}function k(t){return new Promise((function(e,n){if(W(t))e(o(t));else if(W(t[0])){var r=[];t.forEach((function(t){r.push(o(t))})),e(r)}else n("Must be an array of strings or an array of arrays of strings");function o(t){(t=t.slice()).sort();for(var e=C.threshold,n={},r=Math.max(e+1,4),o=function(){for(var r,o=-1;++o<t.length&&!(r=R(t[o],e)););t.forEach((function(t,s){var a=R(t,e);a&&a!==r&&(n[r]=i(n[r],o,s),o=s,r=a)})),n[r]=i(n[r],o,t.length)};e<r;e++)o();function i(t,e,n){return t||(t=[]),t.unshift([e,n]),t}return{array:t,indexes:n}}}))}function R(t,e){return t.length<e?null:H(t.substr(0,e))}function W(t){return Array.isArray(t)&&t.length&&"string"==typeof t[0]}function H(t,e){return t?(t=C.caseSensitive?t:t.toLowerCase(),e?t:i.replace(t)):""}function N(t){return"function"==typeof t}function B(){C.debug&&console.log(x+": "+Array.from(arguments).join(" "))}function M(){c&&(D(c,"input",A),D(c,"blur",j),D(c,"keydown",L))}function z(t,e,n){t.addEventListener(e,n)}function D(t,e,n){t.removeEventListener(e,n)}E(s),c&&(z(f=r(document.body,C.listTag,{class:C.listClass}),"mousedown",(function(t){return t.preventDefault()})),z(f,"click",S),z(window,"load",I),z(window,"resize",j),z(document,"click",q),i.init(),d="".concat(C.listTag,".").concat(C.listClass),B("RegExp - /"+(u=C.regex instanceof RegExp?C.regex:e.create(C,x)).source+"/"+u.flags),C.optimize&&C.startsWith&&k(C.suggestions).then((function(t){C.suggestions=t})).catch((function(t){B(""+t)})))}}));
