/*!*************************************************
* auto-complete.js 1.0.0
* https://github.com/angezid/auto-complete.js
* MIT licensed
* Copyright (c) 2025, angezid
**************************************************/
!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):(t="undefined"!=typeof globalThis?globalThis:t||self).autoComplete=e()}(this,(function(){"use strict";function t(){return t=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},t.apply(null,arguments)}var e={create:function(t,e){var n=this.preprocess(t.queryChars),r="([".concat(n,"]+)"),o="(^|["+this.preprocess(t.triggerChars)+"]+)";return t.debug&&console.log(e+": RegExp trigger pattern - "+o," query pattern - "+r),new RegExp("".concat(o).concat(r,"$"),"u")},preprocess:function(t){var e=this;return t&&t.length?t.split(/(\\[pPu]\{[^}]+\}|\\[swdSWDnt]|.)/).filter((function(t){return t.length})).map((function(t,n){return e.noEscape(t,n)?t:e.escapeCharSet(t)})).join(""):""},noEscape:function(t,e){return 0===e&&"^"===t||t.length>4||/\\[swdSWDnt]/.test(t)},escapeCharSet:function(t){return t.replace(/[-^\]\\]/g,"\\$&")}},n={caretCoordinates:null,getText:function(t){var e=this.getSelection(t).getRangeAt(0),n=document.createRange();n.selectNodeContents(t),n.setEnd(e.startContainer,e.startOffset);var r=e.getBoundingClientRect();return 0===r.x&&0===r.y&&(r=e.startContainer.getBoundingClientRect()),this.caretCoordinates=r,n.toString()},replace:function(t,e,n){var r=this.getText(t).length;this.select(t,r-e.length,r);var o={"<":"&lt;",">":"&gt;","&":"&amp;",'"':"&quot;","'":"&#039;"};document.execCommand("insertHTML",!1,n.replace(/[<>&"']/g,(function(t){return o[t]})))},select:function(t,e,n){for(var r,o,i,s=this.getSelection(t),a=0,l=0,u=0,c=document.createNodeIterator(t,NodeFilter.SHOW_TEXT);i=c.nextNode();)if(i.nodeValue){var f=u+i.nodeValue.length;if(!r&&f>e&&(r=i,a=e-u),!o&&f>=n){o=i,l=n-u;break}u=f}r&&o&&s.setBaseAndExtent(r,a,o,l)},getSelection:function(t){return t.getRootNode().getSelection()}};function r(t,e,n,r){var o=document.createElement(e);return n&&o.setAttribute("class",n),r&&(o.textContent=r),t.appendChild(o),o}var o={caretCoordinates:null,getText:function(t){var e=t.selectionStart,n=t.value.substr(0,e);return this.caretCoordinates=this.getCaretCoordinates(t,e),n},replace:function(t,e,n){var r=t.value,o=t.selectionStart,i=o-e.length;t.value=r.substr(0,i)+n+r.substr(o),t.selectionStart=t.selectionEnd=i+n.length},getCaretCoordinates:function(e,n){var o=e.getBoundingClientRect(),i=e instanceof HTMLInputElement,s=e.value,a=s.length,l=s.substring(0,n),u=window.getComputedStyle(e),c=r(document.body,"div",null,i?l.replace(/\s/g," "):l),f=r(c,"span",null,s.substr(n,a-n>50?50:a)||".");["direction","boxSizing","textAlign","textAlignLast","textTransform","textIndent","letterSpacing","wordSpacing","wordBreak","overflowX","overflowY","tabSize"].forEach((function(t){c.style[t]=u.getPropertyValue(t)}));var d={width:u.width,wordWrap:"normal",whiteSpace:"pre-wrap"};t(c.style,{position:"absolute",visibility:"hidden",top:o.top+"px",left:o.left+"px",font:u.font,padding:u.padding,border:u.border},i?{}:d);var g=parseInt(u.fontSize),h=g+g/2,p=o.top+f.offsetTop-(e.scrollHeight>e.clientHeight?e.scrollTop:0)+parseInt(u.borderTopWidth),v=o.left+f.offsetLeft-(e.scrollWidth>e.clientWidth?e.scrollLeft:0)+parseInt(u.borderLeftWidth)-1;return document.body.removeChild(c),{top:p,left:v,height:h}}},i={chars:["aàáảãạăằắẳẵặâầấẩẫậäåāą","cçćč","dđď","eèéẻẽẹêềếểễệëěēę","iìíỉĩịîïī","lł","nñňń","oòóỏõọôồốổỗộơởỡớờợöøōő","rř","sšśșş","tťțţ","uùúủũụưừứửữựûüůūű","yýỳỷỹỵÿ","zžżź"],obj:{},init:function(){var t=this;this.chars.forEach((function(e){for(var n=e[0],r=e[0].toUpperCase(),o=1;o<e.length;o++)t.obj[e[o]]=n,t.obj[e[o].toUpperCase()]=r}))},replace:function(t){for(var e=this,n=0;n<t.length;n++)if(this.obj[t[n]])return t.split("").map((function(t){return e.obj[t]||t})).join("");return t}};return function(s,a){this.ctx=s,this.options=a,this.newElement=function(t){k(),x(t)},this.destroy=function(t){k(),W(document,"click",C),W(window,"resize",S),W(window,"load",w),f&&document.body.removeChild(f)},this.createIndexes=function(t){return q(t)};var l,u,c,f,d,g,h="auto-complete",p="auto-complete.js",v=0,m=0,y=t({},{queryChars:"\\d\\p{L}_-",triggerChars:"\\s!\"#$%&'()*+,-./:;<=>?@[]\\^`{|}~",listTag:"ul",listItemTag:"li",listClass:h+"-list",listItemClass:h+"-item",listOffsetX:5,listOffsetY:5,debounce:1,threshold:1,maxResults:100,debug:!1},this.options);function x(t){var e="string"==typeof t?document.querySelector(t):t;return e&&(g=!(e instanceof HTMLInputElement||e instanceof HTMLTextAreaElement),R(e,"input",T),R(e,"blur",S),R(e,"keydown",E)),e}function b(t){!function(t){var e,r;if(!t||!(e=t.getAttribute("data-json")))return;var i=JSON.parse(e.replaceAll("&#34;",'"'));r=i.text,j(y.select)&&(r=y.select(i));g?n.replace(l,i.query,r):o.replace(l,i.query,r);S()}(t.target.closest(y.listItemTag))}function w(){setTimeout((function(){document.querySelectorAll(d).forEach((function(t){t.style.display="none"}))}),20)}function C(t){f.contains(t.target)||S()}function T(){(function(){c=null;var t=function(){var t=g?n:o,e=t.getText(l);c=t.caretCoordinates;var r=u.exec(e);if(r){var i,s,a=r.groups;return a&&(s=a.query)?i=a.trigger:(s=r[2])&&(i=r[1]),O("".concat(p,": trigger = '").concat(i,"' query = '").concat(s)),{trigger:i,query:s}}var f=e.length;return O(p+": No match. ",f>20?" ... "+e.slice(f-20):e),null}();if(t&&t.query.length>=y.threshold&&c){var e=function(t){var e=[],n=L(t.query),r=y.startsWith,o=y.suggestions,i=0;if(Array.isArray(o))l(o,0,o.length);else{var s=o.indexes,a=function(t,e){for(var n=Math.min(y.threshold+1,t.length);n>=1;n--){var r=e[A(t,n)];if(r)return r}return null}(n,s);if(!a)return O(p+": Array of indexes is undefined for ",t.query),e;a.forEach((function(t){l(o.array,t[0],t[1])}))}function l(o,s,a){for(;s<a;s++){var l=o[s],u=L(l).indexOf(n);if(r?0===u:u>=0){if(++i>=y.maxResults)break;e.push({text:l,query:t.query,trigger:t.trigger,startIndex:u})}}}return O(p+": Suggestion count =",e.length),e}(t);if(j(y.filter)&&e.length&&(e=y.filter(e)||e),v=e.length)return!y.startsWith&&y.sort&&function(t,e){e=L(e,!0),t.sort((function(t,e){return t.startIndex-e.startIndex}));var n=t.findIndex((function(t){return 0===t.startIndex&&e===L(t.value,!0)}));if(n>0){var r=t[0];t[0]=t[n],t[n]=r}}(e,t.query),void function(t){var e=j(y.listItem);f.innerHTML="",t.forEach((function(t,n){var o=t.text,i=r(f,y.listItemTag,y.listItemClass,o);if(y.highlight){var s=t.startIndex,a=s+t.query.length;i.textContent=s>0?o.substr(0,s):"",r(i,"mark",null,o.substring(s,a)),a<o.length&&i.appendChild(document.createTextNode(o.substr(a)))}e&&y.listItem(i,t);var l=JSON.stringify(t).replaceAll('"',"&#34;");i.setAttribute("data-json",l)}));var n=function(){f.style.display="block";var t=f.getBoundingClientRect(),e=y.listOffsetX,n=y.listOffsetY,r=window.pageYOffset,o=window.pageXOffset,i=o+window.innerWidth-20,s=r+window.innerHeight-20,a=c.top+c.height+r,l=c.left+o;return a+t.height>s?a=a-t.height-c.height-n:a+=n,l+t.width>i?l=l-t.width-e:l+=e,{top:a,left:l}}();f.style.top=n.top+"px",f.style.left=n.left+"px",f.scrollTop=0,m=-1}(e)}S()})(),y.debounce}function S(){f.innerHTML="",f.style.display="none"}function E(t){var e=t.key;if("Escape"!==e){if("ArrowUp"===e)t.preventDefault(),m=m<=0?v-1:m-1,I();else if("ArrowDown"===e)t.preventDefault(),m=m>=v-1?0:m+1,I();else if("Enter"===e||"Tab"===e){if(t.defaultPrevented)return;var n=f.querySelector(".selected");n&&(t.preventDefault(),n.click())}}else S()}function I(){var t=document.querySelectorAll("".concat(d," > ").concat(y.listItemTag));t.forEach((function(t,e){t.classList.toggle("selected",e===m)}));var e=t[m];e&&e.scrollIntoView({block:"nearest",behavior:"smooth"})}function q(t){return new Promise((function(e,n){(t=t.slice()).sort();for(var r=y.threshold,o={},i=Math.max(r+1,4),s=function(){for(var e,n=-1;++n<t.length&&!(e=A(t[n],r)););t.forEach((function(t,i){var s=A(t,r);s&&s!==e&&(o[e]=a(o[e],n,i),n=i,e=s)})),o[e]=a(o[e],n,t.length)};r<i;r++)s();function a(t,e,n){return t||(t=[]),t.unshift([e,n]),t}e({array:t,indexes:o})}))}function A(t,e){return t.length<e?null:L(t.substr(0,e))}function L(t,e){return t?(t=y.caseSensitive?t:t.toLowerCase(),e?t:i.replace(t)):""}function j(t){return"function"==typeof t}function O(t){y.debug&&console.log(Array.from(arguments).join(" "))}function k(){l&&(W(l,"input",T),W(l,"blur",S),W(l,"keydown",E))}function R(t,e,n){t.addEventListener(e,n)}function W(t,e,n){t.removeEventListener(e,n)}return(l=x(this.ctx))&&(R(f=r(document.body,y.listTag,y.listClass),"mousedown",(function(t){return t.preventDefault()})),R(f,"click",b),R(window,"load",w),R(window,"resize",S),R(document,"click",C),i.init(),d="".concat(y.listTag,".").concat(y.listClass),u=y.regex instanceof RegExp?y.regex:e.create(y,p),O(p+": RegExp - /"+u.source+"/"+u.flags),y.optimize&&y.startsWith&&q(y.suggestions).then((function(t){y.suggestions=t}))),this}}));
