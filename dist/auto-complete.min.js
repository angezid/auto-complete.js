/*!*******************************************
* auto-complete.js 1.0.0
* https://github.com/angezid/auto-complete.js
* MIT licensed
* Copyright (c) 2025, angezid
*********************************************/
!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):(t="undefined"!=typeof globalThis?globalThis:t||self).autoComplete=e()}(this,(function(){"use strict";function t(){return t=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},t.apply(null,arguments)}var e={create:function(t,e){var n=this.preprocess(t.queryChars),r="([".concat(n,"]+)"),o="(^|["+this.preprocess(t.triggerChars)+"]+)";return t.debug&&console.log(e+": RegExp trigger pattern - "+o," query pattern - "+r),new RegExp("".concat(o).concat(r,"$"),"u")},preprocess:function(t){var e=this;return t&&t.length?t.split(/(\\[pPu]\{[^}]+\}|\\[swdSWDnt]|.)/).filter((function(t){return t.length})).map((function(t,n){return e.noEscape(t,n)?t:e.escapeCharSet(t)})).join(""):""},noEscape:function(t,e){return 0===e&&"^"===t||t.length>4||/\\[swdSWDnt]/.test(t)},escapeCharSet:function(t){return t.replace(/[-^\]\\]/g,"\\$&")}},n={caretCoordinates:null,getText:function(t,e){var n=this.getSelection(t),r=n.getRangeAt(0),o=r.startContainer,i=r.startOffset,a="";if("true"!==t.contentEditable||e){var s=document.createRange();if(s.selectNodeContents(t),s.setEnd(o,i),a=s.toString(),e)return a}else n.setBaseAndExtent(t,0,o,i),a=n.toString(),n.collapse(o,i);var u=r.getBoundingClientRect();return 0===u.x&&0===u.y&&(u=o.getBoundingClientRect()),this.caretCoordinates=u,a},replace:function(t,e,n){var r=this.getText(t,!0).length,o="true"===t.contentEditable||!/firefox/i.test(navigator.userAgent);if(o){var i={"<":"&lt;",">":"&gt;","&":"&amp;",'"':"&quot;","'":"&#039;"};n=n.replace(/[<>&"']/g,(function(t){return i[t]}))}this.select(t,r-e.length,r),document.execCommand(o?"insertHTML":"insertText",!1,n)},select:function(t,e,n){for(var r,o,i,a=0,s=0,u=0,c=document.createNodeIterator(t,NodeFilter.SHOW_TEXT);i=c.nextNode();){var l=u+i.nodeValue.length;if(!r&&l>e&&(r=i,a=e-u),!o&&l>=n){o=i,s=n-u;break}u=l}r&&o&&this.getSelection(t).setBaseAndExtent(r,a,o,s)},getSelection:function(t){return t.getRootNode().getSelection()}};function r(t,e,n,r){var o=document.createElement(e);if(n)for(var i in n)o.setAttribute(i,n[i]);return r&&(o.textContent=r),t.appendChild(o),o}var o={caretCoordinates:null,getText:function(t){var e=t.selectionStart,n=t.value.substr(0,e);return this.caretCoordinates=this.getCaretCoordinates(t,e),n},replace:function(t,e,n){var r=t.value,o=t.selectionStart,i=o-e.length;t.value=r.substr(0,i)+n+r.substr(o),t.selectionStart=t.selectionEnd=i+n.length},getCaretCoordinates:function(e,n){var o=e.getBoundingClientRect(),i=e instanceof HTMLInputElement,a=e.value,s=a.substring(0,n),u=window.getComputedStyle(e),c=r(document.body,"div",null,i?s.replace(/\s/g," "):s),l=r(c,"span",null,a.substring(n)||".");["direction","boxSizing","textAlign","textAlignLast","textTransform","textIndent","letterSpacing","wordSpacing","wordBreak","overflowX","overflowY","tabSize"].forEach((function(t){c.style[t]=u[t]}));var f={width:u.width,height:u.height,wordWrap:"normal",whiteSpace:"pre-wrap"};t(c.style,{position:"absolute",visibility:"hidden",top:o.top+"px",left:o.left+"px",font:u.font,padding:u.padding,border:u.border},i?{}:f);var d=parseInt(u.fontSize),g=d+d/2,h=o.top+l.offsetTop-(e.scrollHeight>e.clientHeight?e.scrollTop:0)+parseInt(u.borderTopWidth),p=o.left+l.offsetLeft-(e.scrollWidth>e.clientWidth?e.scrollLeft:0)+parseInt(u.borderLeftWidth)-1;return document.body.removeChild(c),{top:h,left:p,height:g}}},i={chars:["aàáảãạăằắẳẵặâầấẩẫậäåāą","cçćč","dđď","eèéẻẽẹêềếểễệëěēę","iìíỉĩịîïī","lł","nñňń","oòóỏõọôồốổỗộơởỡớờợöøōő","rř","sšśșş","tťțţ","uùúủũụưừứửữựûüůūű","yýỳỷỹỵÿ","zžżź"],obj:{},init:function(){var t=this;this.chars.forEach((function(e){for(var n=e[0],r=e[0].toUpperCase(),o=1;o<e.length;o++)t.obj[e[o]]=n,t.obj[e[o].toUpperCase()]=r}))},replace:function(t){for(var e=this,n=0;n<t.length;n++)if(this.obj[t[n]])return t.split("").map((function(t){return e.obj[t]||t})).join("");return t}};return function(a,s){this.newElement=function(t){B(),E(t)},this.destroy=function(){B(),D(document,"click",q),D(window,"resize",L),D(window,"load",I),f&&document.body.removeChild(f)},this.createIndexes=function(t){return k(t)};var u,c,l,f,d,g,h,p,v,y,m="auto-complete",x="auto-complete.js",b=0,w=0,C=t({},{queryChars:"\\d\\p{L}_-",triggerChars:"\\s!\"#$%&'()*+,-./:;<=>?@[]\\^`{|}~",listTag:"ul",listItemTag:"li",listClass:m+"-list",listItemClass:m+"-item",listOffsetX:5,listOffsetY:5,debounce:1,threshold:1,maxResults:100,debug:!1},s),T=(p=function(){l=null;var t=function(){var t=g?n:o,e=t.getText(u);l=t.caretCoordinates;var r=c.exec(e);if(r){var i,a,s=r.groups;return s&&(a=s.query)?i=s.trigger:(a=r[2])&&(i=r[1]),N("trigger = '".concat(i,"' query = '").concat(a,"'")),{trigger:i,query:a}}var f=e.length;return N("No match. ",(f>20?" ... "+e.slice(f-20):e).replace(/\r?\n|\r/g," ")),null}();if(t&&t.query.length>=C.threshold&&l){var e=function(t){var e=[],n=H(t.query),r=C.startsWith,o=C.suggestions,i=0;function a(t,e){var r=t.indexes,o=function(t,e){for(var n=Math.min(C.threshold+1,t.length);n>=1;n--){var r=e[R(t,n)];if(r)return r}return null}(n,r);o?o.forEach((function(n,r){s(t.array,n[0],n[1],e,r)})):N("Array of indexes is undefined for ",t.query)}function s(o,a,s,u,c){for(;a<s;a++){var l=o[a],f=H(l).indexOf(n);if(r?0===f:f>=0){if(++i>=C.maxResults)break;e.push({text:l,query:t.query,trigger:t.trigger,startIndex:f,arrayIndex:u,sortIndex:c})}}}return Array.isArray(o)?W(o)?s(o,0,o.length,0,0):W(o[0])?o.forEach((function(t,e){s(t,0,t.length,e,0)})):o.forEach((function(t,e){a(t,e)})):a(o,0),N("Suggestion count =",e.length),e}(t);if(M(C.filter)&&e.length&&(e=C.filter(e)||e),b=e.length)return!C.startsWith&&C.sort&&function(t,e){e=H(e,!0),t.sort((function(t,e){return t.startIndex-e.startIndex}));var n=t.findIndex((function(t){return 0===t.startIndex&&e===H(t.value,!0)}));if(n>0){var r=t[0];t[0]=t[n],t[n]=r}}(e,t.query),void function(t){var e=M(C.listItem);f.innerHTML="",t.forEach((function(t){var n=t.text,o=r(f,C.listItemTag,{class:C.listItemClass},n);if(C.highlight){var i=t.startIndex,a=i+t.query.length;o.textContent=i>0?n.substr(0,i):"",r(o,"mark",null,n.substring(i,a)),a<n.length&&o.appendChild(document.createTextNode(n.substr(a)))}e&&C.listItem(o,t);var s=JSON.stringify(t).replace(/"/g,"&#34;");o.setAttribute("data-json",s)}));var n=function(){f.style.display="block";var t=f.getBoundingClientRect(),e=C.listOffsetX,n=C.listOffsetY,r=window.pageYOffset,o=window.pageXOffset,i=o+window.innerWidth-20,a=r+window.innerHeight-20,s=l.top+l.height+r,u=l.left+o;return s+t.height>a?s=s-t.height-l.height-n:s+=n,u+t.width>i?u=u-t.width-e:u+=e,{top:s,left:u}}();f.style.top=n.top+"px",f.style.left=n.left+"px",f.scrollTop=0,w=-1,M(C.open)&&C.open(f)}(e)}L()},v=C.debounce,function(){clearTimeout(y),y=setTimeout((function(){p()}),v)});function E(t){var e="string"==typeof t?document.querySelector(t):t;e&&(g=!(e instanceof HTMLInputElement||e instanceof HTMLTextAreaElement),z(e,"input",A),z(e,"blur",L),z(e,"keydown",j),u=e)}function S(t){!function(t){var e,r;if(h=!0,!t||!(e=t.getAttribute("data-json")))return;var i=JSON.parse(e.replace(/&#34;/g,'"'));r=i.text,M(C.select)&&(r=C.select(i));if(!r)return void L();g?n.replace(u,i.query,r):o.replace(u,i.query,r);var a=C.event;a&&(a instanceof KeyboardEvent||a instanceof InputEvent)&&u.dispatchEvent(a);L()}(t.target.closest(C.listItemTag))}function I(){setTimeout((function(){document.querySelectorAll(d).forEach((function(t){t.style.display="none"}))}),20)}function q(t){f.contains(t.target)||L()}function A(t){!h&&/^(?:insertText|deleteContent($|B))/.test(t.inputType)?T():(h=!1,L())}function L(){f.innerHTML="",f.style.display="none"}function j(t){var e=t.key;if("ArrowUp"===e)return t.preventDefault(),w=w<=0?b-1:w-1,void O();if("ArrowDown"===e)return t.preventDefault(),w=w>=b-1?0:w+1,void O();if("Enter"===e||"Tab"===e){var n=f.querySelector(".selected");if(n)return t.preventDefault(),void n.click()}L()}function O(){var t=document.querySelectorAll("".concat(d," > ").concat(C.listItemTag));t.forEach((function(t,e){t.classList.toggle("selected",e===w)}));var e=t[w];e&&e.scrollIntoView({block:"nearest",behavior:"smooth"})}function k(t){return new Promise((function(e,n){if(W(t))e(o(t));else if(W(t[0])){var r=[];t.forEach((function(t){r.push(o(t))})),e(r)}else n("Must be an array of strings or an array of arrays of strings");function o(t){(t=t.slice()).sort();for(var e=C.threshold,n={},r=Math.max(e+1,4),o=function(){for(var r,o=-1;++o<t.length&&!(r=R(t[o],e)););t.forEach((function(t,a){var s=R(t,e);s&&s!==r&&(n[r]=i(n[r],o,a),o=a,r=s)})),n[r]=i(n[r],o,t.length)};e<r;e++)o();function i(t,e,n){return t||(t=[]),t.unshift([e,n]),t}return{array:t,indexes:n}}}))}function R(t,e){return t.length<e?null:H(t.substr(0,e))}function W(t){return Array.isArray(t)&&t.length&&"string"==typeof t[0]}function H(t,e){return t?(t=C.caseSensitive?t:t.toLowerCase(),e?t:i.replace(t)):""}function M(t){return"function"==typeof t}function N(){C.debug&&console.log(x+": "+Array.from(arguments).join(" "))}function B(){u&&(D(u,"input",A),D(u,"blur",L),D(u,"keydown",j))}function z(t,e,n){t.addEventListener(e,n)}function D(t,e,n){t.removeEventListener(e,n)}E(a),u&&(z(f=r(document.body,C.listTag,{class:C.listClass}),"mousedown",(function(t){return t.preventDefault()})),z(f,"click",S),z(window,"load",I),z(window,"resize",L),z(document,"click",q),i.init(),d="".concat(C.listTag,".").concat(C.listClass),N("RegExp - /"+(c=C.regex instanceof RegExp?C.regex:e.create(C,x)).source+"/"+c.flags),C.optimize&&C.startsWith&&k(C.suggestions).then((function(t){C.suggestions=t})).catch((function(t){N(""+t)})))}}));
